{% load i18n %}
{% spaceless %}
<input type="text" id="{{ name }}" value="{{ label }}" class="vAutocompleteSearchField" />
<script type="text/javascript">
$(function() {
    $("#{{ name }}").gAutocomplete({
        // TODO: fix url lookup.. don't know why it doesn't work 
//      backend:     '{# url grp_autocomplete_lookup app_labe=app_label,model_name=model_name,search_fields=search_fields #}', 
        backend:     '/grappelli/autocomplete/{{ app_label }}/{{ model_name }}/{{ search_fields }}/',
        related_url: '{{ related_url }}{{ url|safe }}',
        listFormat:  '{{ list_format|default:"{id:d} - {label:s}" }}',
        inputFormat: '{{ input_format|default:"{label:s}" }}',
        createText:  '{% trans "Create a new" %} {{ model_name }}',
        lookup_url:  '{% url grp_related_lookup %}',
        highlight:   true,
        minChars:    1,
        maxResults:  20
    });
});
</script>
{% endspaceless %}

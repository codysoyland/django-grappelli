{% extends "admin/base_site.html" %}

<!-- LOADING -->
{% load adminmedia admin_list i18n grp_tags %}

<!-- JAVASCRIPTS -->
{% block javascripts %}
    {{ block.super }}
    
    {% if cl.formset %}
        {% url admin:jsi18n as jsi18nurl %}
        <script type="text/javascript" src="{{ jsi18nurl|default:'../../jsi18n/' }}"></script>
    {% endif %}
    
    {{ media }}
    
    <script type="text/javascript" src="{% admin_media_prefix %}js/change_list.js"></script>
    
    <script type="text/javascript" charset="utf-8">

        (function($) {
            $(document).ready(function() {
                // jQuery UI Datepicker
                // $(".vDateField").datepicker({
                //     showOn: 'button', 
                //     buttonImageOnly: false, 
                //     buttonText: ''
                // });


                // NOTE klemens: couldn't find this node anywhere. deprecated?
                $('.toggle-filter').click(function(){
                    console.log("deprecated?: .toggle-filter");
                    $(this).toggleClass('selected');
                    $('.filter-container').toggle();
                });


                // NOTE klemens: couldn't find this node anywhere. deprecated?
                $("div#filter h2").click(function() {
                    console.log("deprecated?: .toggle-filter");
                    $(this).next().toggle();
                });


                // NOTE klemens: couldn't find this node anywhere. deprecated?
                $("h4#filter-handler").click(function() {
                    console.log("deprecated?: .toggle-filter");
                    $("div#filters").toggle();
                });


                // NOTE klemens: couldn't find this node anywhere. deprecated?
                $("a#search-handler").click(function() {
                    console.log("deprecated?: .toggle-filter");
                    $("div.search-container").toggle();
                });
                
                
                $('body').change_list();
                
            {% if is_popup %}
                // UGLY HACK: REMOVE ACTIONS and LIST_EDITABLES FOR POPUPS
                // shouldn't be there in the first place, see
                // http://code.djangoproject.com/ticket/11700
                $('div#actions').hide();
                $('input.action-select').parent().hide();
                $('input#action-toggle').parent().hide();
                $('div.changelist-results input').attr('disabled', 'disabled');
                $('div#submit').hide();
            {% endif %}
            });
        })(jQuery.noConflict());

    </script>
    
{% endblock %}

<!-- COLTYPE/BODYCLASS-- >
{% block bodyclass %}change-list{% endblock %}
{% block content-class %}content-flexible{% endblock %}

<!-- BREADCRUMBS -- >
{% block breadcrumbs %}
{% if not is_popup %}
    <div id="breadcrumbs">
        <a href="../../">{% trans "Home" %}</a> &rsaquo;
        <a href="../">{{ app_label|capfirst }}</a> &rsaquo;
        {{ cl.opts.verbose_name_plural|capfirst }}
    </div>
{% endif %}
{% endblock %}

<!-- CONTENT-TITLE -->
{% block content_title %}
    <h1>
        {{ cl.opts.verbose_name_plural|capfirst }}
    </h1>
{% endblock %}

<!-- OBJECT-TOOLS -->
{% block object-tools %}
    {% if has_add_permission %}
        <ul class="tools">
            <li>
                <a href="add/{% if is_popup %}?_popup=1{% endif %}" class="focus">
                    Add
                </a>
            </li>
        </ul>
    {% endif %}
{% endblock %}

<!-- CONTENT -->
{% block content %}

{% if search_form or cl.date_hierarchy or cl.has_filters %}
    <div class="module changelist-filters">
        <div class="form-row">
            {% pagination cl %}
            {% if cl.has_filters or search_form %}
                <div class="box options">
                    {% if not search_form %}
                        <div id="search" class="box search span-6">
                            {% block search %}{% search_form cl %}{% endblock %}
                        </div>
                    {% endif %}
                    {% if cl.has_filters %}
                        <div id="filters" class="box filter span-6">
                            <a href="javascript://" class="button drop-down toggle-filters">{% trans 'Filter' %}</a>
                            <div class="filter-pulldown">
                                {% for spec in cl.filter_specs %}{% admin_list_filter cl spec %}{% endfor %}
                            </div>
                        </div>
                    {% endif %}
                </div>
            {% endif %}
            <br clear="all" />
        </div>
    </div>
    {% if cl.date_hierarchy %}
        <div id="date-hierarchy" class="module date-hierarchy">
            {% date_hierarchy cl %}
        </div>
    {% endif %}
{% endif %}

<form action="" method="post"{% if cl.formset.is_multipart %} enctype="multipart/form-data"{% endif %}>{% csrf_token %}

<div id="changelist" class="container-full{% if cl.list_editable %} editable{% endif %}" style="">
    <!-- Popup Hidden Field -->
    {% if is_popup %}<input type="hidden" name="_popup" value="1" />{% endif %}
    <!-- Errors -->
    {% if cl.formset.errors %}
        <p class="errornote">
            {% blocktrans count cl.formset.errors|length as counter %}Please correct the error below.{% plural %}Please correct the errors below.{% endblocktrans %}
        </p>
        {{ cl.formset.non_form_errors }}
    {% endif %}
    <!-- Management Form -->
    {% if cl.formset %}
        {{ cl.formset.management_form }}
    {% endif %}
    <!-- Changelist Actions -->
    {% admin_actions %}
    <!-- Changelist Results -->
    {% block result_list %}
        {% result_list cl %}
    {% endblock %}
    <!-- Changelist Actions -->
    {% admin_actions %}
</div><br clear="all" />

<div class="module pagination">
    <div class="form-row">
        {% pagination cl %}
    </div>
</div>

{% if cl.formset and cl.result_count %}
<div id="submit" class="module footer" style="display: none;">
    <ul class="submit-row">
        <li class="left delete-link-container"><a href="javascript://" class="cancel-link">Cancel</a></li>
        <li class="submit-button-container"><input type="submit" class="default" value="Save"/></li>
    </ul>
</div>
{% endif %}

</form>


{% endblock %}

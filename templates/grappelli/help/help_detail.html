{% extends "admin/base_site.html" %}
{% load adminmedia %}
{% load i18n %}

{% block extrastyle %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{% admin_media_prefix %}css-development/grappelli_help.css" />
{% endblock %}
{% block extrahead %}
<script>
$(document).ready(function(){
    if ($('div.help div.module').length > 1) {
        $('div.help div.module:first').remove();
    }
    // $('div.module').each(function() {
    //     $(this).find('h2 ~ h3:first').each(function() {
    //         $(this).attr('style', 'margin-top: 10px !important;');
    //     });
    // });

    // Sync Active Help Entry With Link In Sidebar
    $('body').each(function(){
        var ActiveItem = $('.help-content').attr('name');
        $('#content-related').find('a.'+ActiveItem).addClass('selected');
    });
});
</script>
{% endblock %}
{% block coltype %}colSM{% endblock %}
{% block bodyclass %}dashboard grappelli-help{% endblock %}
{% block breadcrumbs %}<div class="breadcrumbs"><a href="/admin/">{% trans "Home" %}</a> &rsaquo; <a href="/grappelli/help/">{% trans "Help" %}</a> &rsaquo; {{ object.title }}</div>{% endblock %}

{% block content %}
<div id="content-main" class="rte">
    <div class="help-content" name="detail-{{ object.id }}">
    {{ object.get_body|safe }}
    </div>
</div>
{% endblock %}

{% block sidebar %}
<div id="content-related">
    {% for help in menu %}
    <div class="module">
        <h2>{{ help }}</h2>
        {% for helpitem in help.helpitem_set.all %}
        <div class="form-row">
            <a href="../{{ helpitem.id }}/" class="detail-{{ helpitem.id }}">{{ helpitem }}</a>
        </div>
        {% endfor %}
    </div>
    {% endfor %}
</div>
{% endblock %}
